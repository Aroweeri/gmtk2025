[gd_scene load_steps=36 format=3 uid="uid://bhujpltdw4ljj"]

[ext_resource type="Script" uid="uid://cretloakqtccg" path="res://scenes/main.gd" id="1_rarhs"]
[ext_resource type="Script" uid="uid://dp84pamq5ofd7" path="res://scripts/rotator.gd" id="2_0bbpv"]
[ext_resource type="Texture2D" uid="uid://chw70u2c8siwq" path="res://assets/Sun.png" id="2_nxtc6"]
[ext_resource type="Script" uid="uid://bt0iktgl5e5py" path="res://scripts/player.gd" id="3_0bbpv"]
[ext_resource type="Texture2D" uid="uid://cqdfthrx6cgyc" path="res://assets/Planet.png" id="5_wp0k4"]
[ext_resource type="Texture2D" uid="uid://cdh7da8rvrw0d" path="res://assets/Planet_n.png" id="6_bjd11"]
[ext_resource type="Texture2D" uid="uid://b8lhxbmwq6pew" path="res://assets/2d_lights_and_shadows_neutral_point_light.webp" id="6_nxtc6"]
[ext_resource type="Texture2D" uid="uid://dwrufhrusf85g" path="res://assets/Space.png" id="7_q8u5g"]
[ext_resource type="Texture2D" uid="uid://m3y52r3dbt7q" path="res://assets/Health.png" id="8_wp0k4"]
[ext_resource type="PackedScene" uid="uid://dll3jkyyw6d4k" path="res://controlsWidget.tscn" id="9_1iba3"]
[ext_resource type="AudioStream" uid="uid://disjmopfasxnc" path="res://assets/Stream Loops 2024-03-20_02.ogg" id="10_lhr70"]
[ext_resource type="AudioStream" uid="uid://qh0yjqrb8wr1" path="res://assets/impactGlass_medium_000.ogg" id="11_1nqs0"]
[ext_resource type="AudioStream" uid="uid://c56q1ppmc7lrf" path="res://assets/impactGlass_medium_001.ogg" id="12_1iba3"]
[ext_resource type="AudioStream" uid="uid://c6st8x7x46gbm" path="res://assets/Ludum Dare 30 - 04.ogg" id="12_yxlcp"]
[ext_resource type="AudioStream" uid="uid://b78m4vqoh11hg" path="res://assets/impactGlass_medium_002.ogg" id="13_yxlcp"]
[ext_resource type="AudioStream" uid="uid://b5huyvhtwccr6" path="res://assets/impactGlass_medium_003.ogg" id="14_ebg2g"]
[ext_resource type="AudioStream" uid="uid://f23th0stl4xc" path="res://assets/impactGlass_medium_004.ogg" id="15_2ofn6"]
[ext_resource type="AudioStream" uid="uid://453slcvs1f8n" path="res://assets/impactPlate_heavy_000.ogg" id="16_xa025"]
[ext_resource type="AudioStream" uid="uid://dlcago8sst1g4" path="res://assets/impactPlate_heavy_001.ogg" id="17_36rkl"]
[ext_resource type="AudioStream" uid="uid://csgc7rqmy7sd6" path="res://assets/impactPlate_heavy_002.ogg" id="18_fs0b5"]
[ext_resource type="AudioStream" uid="uid://b8cyplx7g0doa" path="res://assets/impactPlate_heavy_003.ogg" id="19_ma7h6"]
[ext_resource type="AudioStream" uid="uid://dt8q8a67oh43j" path="res://assets/impactPlate_heavy_004.ogg" id="20_e2s0e"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_ebg2g"]
light_mode = 1

[sub_resource type="CanvasTexture" id="CanvasTexture_qmy6f"]
diffuse_texture = ExtResource("5_wp0k4")
normal_texture = ExtResource("6_bjd11")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_1iba3"]
polygon = PackedVector2Array(-15, -64, -15, -63, -19, -63, -19, -62, -22, -62, -22, -61, -25, -61, -25, -60, -27, -60, -27, -59, -29, -59, -29, -58, -31, -58, -31, -57, -33, -57, -33, -56, -35, -56, -35, -55, -36, -55, -36, -54, -38, -54, -38, -53, -39, -53, -39, -52, -40, -52, -40, -51, -42, -51, -42, -50, -43, -50, -43, -49, -44, -49, -44, -48, -45, -48, -45, -47, -46, -47, -46, -46, -47, -46, -47, -45, -48, -45, -48, -44, -49, -44, -49, -43, -50, -43, -50, -42, -51, -42, -51, -40, -52, -40, -52, -39, -53, -39, -53, -38, -54, -38, -54, -36, -55, -36, -55, -35, -56, -35, -56, -33, -57, -33, -57, -31, -58, -31, -58, -29, -59, -29, -59, -27, -60, -27, -60, -25, -61, -25, -61, -22, -62, -22, -62, -19, -63, -19, -63, -15, -64, -15, -64, 15, -63, 15, -63, 19, -62, 19, -62, 22, -61, 22, -61, 25, -60, 25, -60, 27, -59, 27, -59, 29, -58, 29, -58, 31, -57, 31, -57, 33, -56, 33, -56, 35, -55, 35, -55, 36, -54, 36, -54, 38, -53, 38, -53, 39, -52, 39, -52, 40, -51, 40, -51, 42, -50, 42, -50, 43, -49, 43, -49, 44, -48, 44, -48, 45, -47, 45, -47, 46, -46, 46, -46, 47, -45, 47, -45, 48, -44, 48, -44, 49, -43, 49, -43, 50, -42, 50, -42, 51, -40, 51, -40, 52, -39, 52, -39, 53, -38, 53, -38, 54, -36, 54, -36, 55, -35, 55, -35, 56, -33, 56, -33, 57, -31, 57, -31, 58, -29, 58, -29, 59, -27, 59, -27, 60, -25, 60, -25, 61, -22, 61, -22, 62, -19, 62, -19, 63, -15, 63, -15, 64, 15, 64, 15, 63, 19, 63, 19, 62, 22, 62, 22, 61, 25, 61, 25, 60, 27, 60, 27, 59, 29, 59, 29, 58, 31, 58, 31, 57, 33, 57, 33, 56, 35, 56, 35, 55, 36, 55, 36, 54, 38, 54, 38, 53, 39, 53, 39, 52, 40, 52, 40, 51, 42, 51, 42, 50, 43, 50, 43, 49, 44, 49, 44, 48, 45, 48, 45, 47, 46, 47, 46, 46, 47, 46, 47, 45, 48, 45, 48, 44, 49, 44, 49, 43, 50, 43, 50, 42, 51, 42, 51, 40, 52, 40, 52, 39, 53, 39, 53, 38, 54, 38, 54, 36, 55, 36, 55, 35, 56, 35, 56, 33, 57, 33, 57, 31, 58, 31, 58, 29, 59, 29, 59, 27, 60, 27, 60, 25, 61, 25, 61, 22, 62, 22, 62, 19, 63, 19, 63, 15, 64, 15, 64, -15, 63, -15, 63, -19, 62, -19, 62, -22, 61, -22, 61, -25, 60, -25, 60, -27, 59, -27, 59, -29, 58, -29, 58, -31, 57, -31, 57, -33, 56, -33, 56, -35, 55, -35, 55, -36, 54, -36, 54, -38, 53, -38, 53, -39, 52, -39, 52, -40, 51, -40, 51, -42, 50, -42, 50, -43, 49, -43, 49, -44, 48, -44, 48, -45, 47, -45, 47, -46, 46, -46, 46, -47, 45, -47, 45, -48, 44, -48, 44, -49, 43, -49, 43, -50, 42, -50, 42, -51, 40, -51, 40, -52, 39, -52, 39, -53, 38, -53, 38, -54, 36, -54, 36, -55, 35, -55, 35, -56, 33, -56, 33, -57, 31, -57, 31, -58, 29, -58, 29, -59, 27, -59, 27, -60, 25, -60, 25, -61, 22, -61, 22, -62, 19, -62, 19, -63, 15, -63, 15, -64)

[sub_resource type="CircleShape2D" id="CircleShape2D_0bbpv"]
radius = 58.2151

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_yxlcp"]
light_mode = 1

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_q8u5g"]
light_mode = 1

[sub_resource type="AtlasTexture" id="AtlasTexture_bjd11"]
atlas = ExtResource("8_wp0k4")
region = Rect2(6, 11, 268, 133)

[sub_resource type="AtlasTexture" id="AtlasTexture_qmy6f"]
atlas = ExtResource("8_wp0k4")
region = Rect2(278, 11, 174, 219)

[sub_resource type="AtlasTexture" id="AtlasTexture_mwfav"]
atlas = ExtResource("8_wp0k4")
region = Rect2(455, 11, 175, 306)

[sub_resource type="AtlasTexture" id="AtlasTexture_3p2gp"]
atlas = ExtResource("8_wp0k4")
region = Rect2(633, 11, 174, 393)

[sub_resource type="AtlasTexture" id="AtlasTexture_cvmbd"]
atlas = ExtResource("8_wp0k4")
region = Rect2(811, 11, 179, 481)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_gsxep"]
streams_count = 5
stream_0/stream = ExtResource("11_1nqs0")
stream_1/stream = ExtResource("12_1iba3")
stream_2/stream = ExtResource("13_yxlcp")
stream_3/stream = ExtResource("14_ebg2g")
stream_4/stream = ExtResource("15_2ofn6")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_v0vrg"]
streams_count = 5
stream_0/stream = ExtResource("16_xa025")
stream_1/stream = ExtResource("17_36rkl")
stream_2/stream = ExtResource("18_fs0b5")
stream_3/stream = ExtResource("19_ma7h6")
stream_4/stream = ExtResource("20_e2s0e")

[node name="Node2D" type="Node2D"]
script = ExtResource("1_rarhs")

[node name="Sun" type="Sprite2D" parent="."]
material = SubResource("CanvasItemMaterial_ebg2g")
scale = Vector2(8, 8)
texture = ExtResource("2_nxtc6")

[node name="PlayerRotator" type="Node2D" parent="."]
script = ExtResource("2_0bbpv")

[node name="Player" type="Node2D" parent="PlayerRotator"]
position = Vector2(9455, 0)
script = ExtResource("3_0bbpv")

[node name="Sprite" type="Sprite2D" parent="PlayerRotator/Player"]
light_mask = 2
texture = SubResource("CanvasTexture_qmy6f")

[node name="LightOccluder2D" type="LightOccluder2D" parent="PlayerRotator/Player/Sprite"]
occluder = SubResource("OccluderPolygon2D_1iba3")

[node name="Camera2D" type="Camera2D" parent="PlayerRotator/Player"]
position = Vector2(0, 1364)
zoom = Vector2(0.18, 0.18)

[node name="StaticBody2D" type="Area2D" parent="PlayerRotator/Player"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerRotator/Player/StaticBody2D"]
visible = false
shape = SubResource("CircleShape2D_0bbpv")

[node name="Parallax2D" type="Parallax2D" parent="."]
scroll_scale = Vector2(0.15, 0.15)

[node name="TextureRect" type="TextureRect" parent="Parallax2D"]
z_index = -2
material = SubResource("CanvasItemMaterial_yxlcp")
offset_left = -30000.0
offset_top = -30000.0
offset_right = -10000.0
offset_bottom = -10000.0
scale = Vector2(3, 3)
texture = ExtResource("7_q8u5g")
stretch_mode = 1

[node name="Sprite2D" type="Sprite2D" parent="Parallax2D"]
visible = false
light_mask = 0
z_index = -2
material = SubResource("CanvasItemMaterial_q8u5g")
scale = Vector2(10, 10)
texture = ExtResource("7_q8u5g")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
offset_right = 40.0
offset_bottom = 40.0
scale = Vector2(0.5, 0.2)
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="healthHBox" type="HBoxContainer" parent="CanvasLayer/MarginContainer"]
layout_mode = 2

[node name="health1" type="TextureRect" parent="CanvasLayer/MarginContainer/healthHBox"]
layout_mode = 2
size_flags_vertical = 0
texture = SubResource("AtlasTexture_bjd11")

[node name="health2" type="TextureRect" parent="CanvasLayer/MarginContainer/healthHBox"]
layout_mode = 2
size_flags_vertical = 0
texture = SubResource("AtlasTexture_qmy6f")

[node name="health3" type="TextureRect" parent="CanvasLayer/MarginContainer/healthHBox"]
layout_mode = 2
size_flags_vertical = 0
texture = SubResource("AtlasTexture_mwfav")

[node name="health4" type="TextureRect" parent="CanvasLayer/MarginContainer/healthHBox"]
layout_mode = 2
size_flags_vertical = 0
texture = SubResource("AtlasTexture_3p2gp")

[node name="health5" type="TextureRect" parent="CanvasLayer/MarginContainer/healthHBox"]
layout_mode = 2
size_flags_vertical = 0
texture = SubResource("AtlasTexture_cvmbd")

[node name="MarginContainer2" parent="CanvasLayer" instance=ExtResource("9_1iba3")]
anchors_preset = 3
anchor_left = 1.0
anchor_right = 1.0
offset_left = -316.0
offset_top = -267.0
offset_right = 0.0
grow_horizontal = 0

[node name="WinMessage" type="MarginContainer" parent="CanvasLayer"]
visible = false
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -392.0
offset_top = -109.0
offset_right = 392.0
grow_horizontal = 2
grow_vertical = 0
size_flags_horizontal = 4
size_flags_vertical = 8
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="Label" type="Label" parent="CanvasLayer/WinMessage"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "You Win! Press ESC to continue"

[node name="PointLight2D" type="PointLight2D" parent="."]
scale = Vector2(2.74547, 2.74547)
energy = 2.0
range_item_cull_mask = 3
shadow_enabled = true
texture = ExtResource("6_nxtc6")
texture_scale = 50.0

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.194349, 0.194349, 0.194349, 1)

[node name="BackgroundMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_lhr70")
volume_db = -10.0
autoplay = true
parameters/looping = true

[node name="VictoryMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("12_yxlcp")
parameters/looping = true

[node name="CollectSFX" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_gsxep")

[node name="DamageSFX" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_v0vrg")

[connection signal="ateAsteroid" from="PlayerRotator/Player" to="." method="_on_player_ate_asteroid"]
[connection signal="healthLost" from="PlayerRotator/Player" to="." method="_on_player_health_lost"]
[connection signal="isSnowballing" from="PlayerRotator/Player" to="." method="_on_player_is_snowballing"]
[connection signal="isSnowballing" from="PlayerRotator/Player" to="PlayerRotator" method="_on_player_is_snowballing"]
[connection signal="playerDied" from="PlayerRotator/Player" to="." method="_on_player_player_died"]
